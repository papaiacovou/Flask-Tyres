<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Invoice Receipt</title>
    <style>
        body { font-family: Arial, sans-serif; }
        .header { background: #888; color: #fff; text-align: center; font-size: 2.5em; padding: 0.5em 0; }
        .row { display: flex; justify-content: space-between; margin-top: 1em; }
        .from { font-style: italic; }
        .big { font-size: 1.2em; }
        .main-table { width: 100%; border-collapse: collapse; margin: 2em 0 0 0; }
        .main-table th, .main-table td { border: 1px solid #888; padding: 6px 10px; text-align: center; }
        .main-table th { background: #ccc; }
        .right { text-align: right; }
        .left { text-align: left; }
        .thankyou { font-family: Arial Black, Arial, sans-serif; font-size: 1.5em; margin-top: 1.3em; }
    </style>
</head>
<body>
    <div class="header">Invoice Receipt</div>
    <div class="row">
        <div class="left">
            <span class="from">FROM:</span><br>
            <span class="big"><b>{{ company.company_name }}</b></span><br>
            {% if company.address %}{{ company.address }}<br>{% endif %}
            {% if company.city or company.postal %}
              {{ company.city }}{% if company.city and company.postal %}, {% endif %}{{ company.postal }}<br>
            {% endif %}
            {% if company.country %}{{ company.country }}<br>{% endif %}
            {% if company.phone %}{{ company.phone }}<br>{% endif %}
            {% if company.email %}{{ company.email }}<br>{% endif %}
            {% if company.vat %}VAT: {{ company.vat }}<br>{% endif %}
        </div>
        <div class="left">
            <span><b>BILL TO:</b></span><br>
            <span style="white-space: pre-line;">{{ bill_to }}</span>
        </div>
        <div class="right">
            <b>Receipt #:</b> {{ receipt_number }}<br>
            <b>Date:</b> {{ date }}
        </div>
    </div>
    <table class="main-table">
        <thead>
            <tr>
                <th>Invoice No</th>
                <th>Amount Paid</th>
                <th>Method</th>
                <th>Check Number</th>
                <th>Bank</th>
                <th>Total (exc. VAT)</th>
            </tr>
        </thead>
        <tbody>
        {% for p in payments %}
            <tr>
                <td>{{ p.invoice_number }}</td>
                <td>{{ "%.2f"|format(p.amount_paid|float) }}</td>
                <td>{{ p.method }}</td>
                <td>{{ p.check_number }}</td>
                <td>{{ p.bank }}</td>
                <td>{{ "%.2f"|format(p.total_exc_vat|float) }}</td>
            </tr>
        {% endfor %}
        {% for i in range(7-payments|length) %}
            <tr><td>&nbsp;</td><td></td><td></td><td></td><td></td><td></td></tr>
        {% endfor %}
        </tbody>
    </table>

    <div style="width: 100%; margin-top: 1.5em;">
        <div style="float: left;">
            <span class="thankyou">
                We appreciate<br>your business!
            </span>
        </div>
        <div style="float: right; width: 410px;">
            <table style="width: 100%; font-size: 1.18em; text-align: right;">
                <tr>
                    <td style="padding: 2px 10px 2px 0;">Subtotal:</td>
                    <td style="font-weight: bold;">€ {{ "%.2f"|format(subtotal or 0) }}</td>
                </tr>
                <tr>
                    <td style="padding: 2px 10px 2px 0;">Amount Currently Owe:</td>
                    <td style="font-weight: bold;">€ {{ "%.2f"|format(amount_currently_owe or 0) }}</td>
                </tr>
                <tr>
                    <td style="padding: 2px 10px 2px 0;">Balance Due:</td>
                    <td style="font-weight: bold;">€ {{ "%.2f"|format(balance_due or 0) }}</td>
                </tr>
                <tr>
                    <td style="padding: 2px 10px 2px 0; font-weight:bold;">Original Invoice Amount:</td>
                    <td style="font-weight: bold;">€ {{ "%.2f"|format(original_invoice_amount or 0) }}</td>
                </tr>
            </table>
        </div>
        <div style="clear: both;"></div>
    </div>
</body>
</html>
